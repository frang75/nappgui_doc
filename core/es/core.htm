
h1.Core

ep.Un core fuerte mejorará tu técnica, fuerza, resistencia y complementará todo lo que hagas.
<i>Susan Trainor</i>

p.De igual forma que un edificio necesita una cimentación fuerte, cualquier aplicación o librería debe sustentarse sobre pilares robustos y eficientes. Es inútil invertir horas y horas en una bonita interfaz si el motor interno está quebrado. Para este cometido ha sido desarrollada la librería <i>core</i> <r>core_depends</r>. Proveé estructuras, utilidades y algoritmos de uso común en programación, que nos facilitarán el desarrollo de programas garantizando la máxima eficiencia y portabilidad. <i>Core</i> supone el tercer nivel dentro del SDK de NAppGUI y aún no tiene conocimiento sobre las posibilidades gráficas del sistema operativo, por lo que puede utilizarse en la implementación de cualquier tipo de proyecto.

img(core_depends.svg,300,.4).Dependencias de <i>core</i>. Ver <lp>sdk</lp>.
Árbol de dependencias de la librería core.

p.Los servicios que proporciona <i>core</i> se han dividido en una serie de módulos.

li.<lp>heap</lp>, <lp>buffer</lp>.
li.<lp>string</lp>.
li.<lp>stream</lp>.
li.<lp>arrst</lp>.
li.<lp>setst</lp>.
li.<lp>lex</lp>.
li.<lp>regex</lp>.
li.<lp>dbind</lp>.
li.<lp>event</lp>.
li.<lp>hfile</lp>.
li.<lp>respack</lp>.
li.<lp>date</lp> y <lp>clock</lp>.

enum(core_event_t).Tipos de evento en la librería <i>core</i>.
enumv(ekEASSERT).Redirección de los <lp>cassert</lp>.
enumv(ekEFILE).Un archivo detectado mientras recorremos un directorio. <lf>hfile_dir_loop</lf>.
enumv(ekEENTRY).Entrada en un sub-directorio mientras recorremos un directorio. <lf>hfile_dir_loop</lf>.
enumv(ekEEXIT).Salida de un sub-directorio.

enum(sstate_t).Estado en <lp>stream</lp>.
enumv(ekSTOK).Todo bien, no errores.
enumv(ekSTEND).No hay más datos en el canal.
enumv(ekSTCORRUPT).Los datos en el canal no son válidos o no se han leído correctamente.
enumv(ekSTBROKEN).Error en el canal de comunicación.

enum(vkey_t).Códigos de teclado. Ver <lh>Uso del teclado</lh>.
enumv(ekKEY_UNDEF).
enumv(ekKEY_A).
enumv(ekKEY_S).
enumv(ekKEY_D).
enumv(ekKEY_F).
enumv(ekKEY_H).
enumv(ekKEY_G).
enumv(ekKEY_Z).
enumv(ekKEY_X).
enumv(ekKEY_C).
enumv(ekKEY_V).
enumv(ekKEY_BSLASH).
enumv(ekKEY_B).
enumv(ekKEY_Q).
enumv(ekKEY_W).
enumv(ekKEY_E).
enumv(ekKEY_R).
enumv(ekKEY_Y).
enumv(ekKEY_T).
enumv(ekKEY_1).
enumv(ekKEY_2).
enumv(ekKEY_3).
enumv(ekKEY_4).
enumv(ekKEY_6).
enumv(ekKEY_5).
enumv(ekKEY_9).
enumv(ekKEY_7).
enumv(ekKEY_8).
enumv(ekKEY_0).
enumv(ekKEY_RCURLY).
enumv(ekKEY_O).
enumv(ekKEY_U).
enumv(ekKEY_LCURLY).
enumv(ekKEY_I).
enumv(ekKEY_P).
enumv(ekKEY_RETURN).
enumv(ekKEY_L).
enumv(ekKEY_J).
enumv(ekKEY_SEMICOLON).
enumv(ekKEY_K).
enumv(ekKEY_QUEST).
enumv(ekKEY_COMMA).
enumv(ekKEY_MINUS).
enumv(ekKEY_N).
enumv(ekKEY_M).
enumv(ekKEY_PERIOD).
enumv(ekKEY_TAB).
enumv(ekKEY_SPACE).
enumv(ekKEY_GTLT).
enumv(ekKEY_BACK).
enumv(ekKEY_ESCAPE).
enumv(ekKEY_F17).
enumv(ekKEY_NUMDECIMAL).
enumv(ekKEY_NUMMULT).
enumv(ekKEY_NUMADD).
enumv(ekKEY_NUMLOCK).
enumv(ekKEY_NUMDIV).
enumv(ekKEY_NUMRET).
enumv(ekKEY_NUMMINUS).
enumv(ekKEY_F18).
enumv(ekKEY_F19).
enumv(ekKEY_NUMEQUAL).
enumv(ekKEY_NUM0).
enumv(ekKEY_NUM1).
enumv(ekKEY_NUM2).
enumv(ekKEY_NUM3).
enumv(ekKEY_NUM4).
enumv(ekKEY_NUM5).
enumv(ekKEY_NUM6).
enumv(ekKEY_NUM7).
enumv(ekKEY_NUM8).
enumv(ekKEY_NUM9).
enumv(ekKEY_F5).
enumv(ekKEY_F6).
enumv(ekKEY_F7).
enumv(ekKEY_F3).
enumv(ekKEY_F8).
enumv(ekKEY_F9).
enumv(ekKEY_F11).
enumv(ekKEY_F13).
enumv(ekKEY_F16).
enumv(ekKEY_F14).
enumv(ekKEY_F10).
enumv(ekKEY_F12).
enumv(ekKEY_F15).
enumv(ekKEY_PAGEUP).
enumv(ekKEY_HOME).
enumv(ekKEY_SUPR).
enumv(ekKEY_F4).
enumv(ekKEY_PAGEDOWN).
enumv(ekKEY_F2).
enumv(ekKEY_END).
enumv(ekKEY_F1).
enumv(ekKEY_LEFT).
enumv(ekKEY_RIGHT).
enumv(ekKEY_DOWN).
enumv(ekKEY_UP).
enumv(ekKEY_LSHIFT).
enumv(ekKEY_RSHIFT).
enumv(ekKEY_LCTRL).
enumv(ekKEY_RCTRL).
enumv(ekKEY_LALT).
enumv(ekKEY_RALT).
enumv(ekKEY_INSERT).
enumv(ekKEY_EXCLAM).
enumv(ekKEY_MENU).
enumv(ekKEY_LWIN).
enumv(ekKEY_RWIN).
enumv(ekKEY_CAPS).
enumv(ekKEY_TILDE).
enumv(ekKEY_GRAVE).
enumv(ekKEY_PLUS).

enum(keymod_t).Teclas modificadoras.
enumv(ekMKEY_NONE).
enumv(ekMKEY_SHIFT).
enumv(ekMKEY_CONTROL).
enumv(ekMKEY_ALT).
enumv(ekMKEY_COMMAND).

enum(lextoken_t).Tipos de <i>tokens</i> en <lp>lex</lp>.
enumv(ekTSLCOM).Comentario de una sola línea, que comienza por <c>//</c>.
enumv(ekTMLCOM).Comentario multi-línea, encerrado entre <c>/*</c> y <c>*/</c>.
enumv(ekTSPACE).Representa una serie de espacios en blanco (<c>' '</c>, <c>'\t'</c>, <c>'\v'</c>, <c>'\f'</c>, <c>'\r'</c>).
enumv(ekTEOL).Representa el carácter nueva línea (<c>'\n'</c>).
enumv(ekTLESS).Signo menor que <c>'<<>'</c>.
enumv(ekTGREAT).Signo mayor que <c>'<>>'</c>.
enumv(ekTCOMMA).Signo coma <c>','</c>.
enumv(ekTPERIOD).Signo punto <c>'.'</c>.
enumv(ekTSCOLON).Signo punto y coma <c>';'</c>.
enumv(ekTCOLON).Signo dos puntos <c>':'</c>.
enumv(ekTOPENPAR).Paréntesis de apertura <c>'('</c>.
enumv(ekTCLOSPAR).Paréntesis de cierre <c>')'</c>.
enumv(ekTOPENBRAC).Corchete de apertura <c>'['</c>.
enumv(ekTCLOSBRAC).Corchete de cierre <c>']'</c>.
enumv(ekTOPENCURL).Llave de apertura <c>'{'</c>.
enumv(ekTCLOSCURL).Llave de cierre <c>'}'</c>.
enumv(ekTPLUS).Signo más <c>'+'</c>.
enumv(ekTMINUS).Signo menos <c>'-'</c>.
enumv(ekTASTERK).Signo asterisco <c>'*'</c>.
enumv(ekTEQUALS).Signo igual <c>'='</c>.
enumv(ekTDOLLAR).Signo dolar.
enumv(ekTPERCEN).Signo porcentaje <c>'%'</c>.
enumv(ekTPOUND).Signo almohadilla <c>'#'</c>.
enumv(ekTAMPER).Signo <i>ampersand</i> <c>'&'</c>.
enumv(ekTAPOST).Signo apóstrofe <c>'''</c>.
enumv(ekTQUOTE).Signo comillas <c>'"'</c>.
enumv(ekTCIRCUM).Signo acento circunflejo <c>'^'</c>.
enumv(ekTTILDE).Signo tilde <c>'~'</c>.
enumv(ekTEXCLA).Signo exclamación <c>'!'</c>.
enumv(ekTQUEST).Signo interrogación <c>'?'</c>.
enumv(ekTVLINE).Signo barra vertical <c>'|'</c>.
enumv(ekTSLASH).Signo barra oblicua <c>'/'</c>.
enumv(ekTBSLASH).Signo barra invertida <c>'\'</c>.
enumv(ekTAT).Signo arroba <c>'@'</c>.
enumv(ekTINTEGER).Número entero. <lh>Números</lh>.
enumv(ekTOCTAL).Número octal. <lh>Números</lh>.
enumv(ekTHEX).Número hexadecimal. <lh>Números</lh>.
enumv(ekTREAL).Número real. <lh>Números</lh>.
enumv(ekTSTRING).Cadena de caracteres Unicode, entre comillas. <lh>Cadenas</lh>.
enumv(ekTIDENT).Identificador. <lh>Identificadores</lh>.
enumv(ekTUNDEF).Token desconocido.
enumv(ekTCORRUP).Error en el <lp>stream</lp> de entrada.
enumv(ekTEOF).Final del <lp>stream</lp>. No hay más tokens.
enumv(ekTRESERVED).<lh>Palabras clave</lh>. Al ser de propósito general, <lt>LexScn</lt> no etiqueta ningún identificador como palabra reservada. Hay que hacerlo en fases posteriores al análisis.

struct(Buffer).Bloque de memoria de propósito general, reservado dinámicamente. Una vez creado, ya no se puede redimensionar. <lp>buffer</lp>.

struct(String).Cadena de caracteres UTF8 reservada dinámicamente. Son objetos "parcialmente mutables". La memoria reservada no puede crecer, pero se pueden sustituir caracteres siempre que no se desborde la capacidad inicial del buffer. <lp>string</lp>.

struct(Stream).Canal genérico de entrada/salida, donde es posible leer y escribir datos con formato. <lp>stream</lp>.

struct(ArrSt).Array de registros. El tipo de objeto se indica entre paréntesis. <lp>arrst</lp>.

struct(ArrPt).Array de punteros. El tipo de objeto se indica entre paréntesis. <lp>arrpt</lp>.

struct(SetSt).Conjunto de registros. El tipo de objeto se indica entre paréntesis. <lp>setst</lp>.

struct(SetPt).Conjunto de punteros. El tipo de objeto se indica entre paréntesis. <lp>setpt</lp>.

struct(LexScn).Analizador léxico. <lp>lex</lp>.

struct(RegEx).Expresión regular. <lp>regex</lp>.

struct(Event).Contiene información referente a un evento. <lp>event</lp>.

struct(KeyBuf).Búfer de teclado con el estado de cada tecla (pulsada/liberada). <lp>keybuf</lp>.

struct(Listener).Enlaza al generador y receptor de un eventos a través de una función <i>callback</i>. <lp>event</lp>.

struct(IListener).Interfaz C++ para utilizar miembros de clase como manejadores de eventos. <lp>hellocpp</lp>.

struct(DirEntry).Elemento de un directorio, obtenido mediante <lf>hfile_dir_list</lf>.
smember(String*,name).Nombre del archivo o subdirectorio, sin directorios intermedios.
smember(file_type_t,type).Tipo de elemento.
smember(uint64_t,size).Tamaño en bytes.
smember(Date,date).Fecha de la última modificación.

struct(EvFileDir).Parámetros del evento <lt>ekEFILE</lt> y <lt>ekEENTRY</lt> durante la navegación automática por directorios. <lf>hfile_dir_loop</lf>.
smember(const char_t*,pathname).El camino parcial desde el parámetro <c>pathname</c> de <lf>hfile_dir_loop</lf>.
smember(uint32_t,level).La profundidad del directorio desde <c>pathname</c>.

struct(ResPack).Paquete de recursos que serán cargados conjuntamente. Utilizar <lt>ResId</lt> para acceder a un recurso concreto. <lp>resources</lp>.

struct(ResId).Identificador de un recurso. Son generados automáticamente por <i>nrc NAppGUI Resource Compiler</i>. <lp>resources</lp>.

struct(Clock).Mide el tiempo transcurrido entre dos instantes dentro de la aplicación, con precisión de micro-segundos. También es útil para lanzar eventos a intervalos regulares de tiempo.

func(FPtr_remove,ptr).Libera la memoria de los campos de un objeto, pero no el objeto en sí mismo. <lh>Registros o punteros</lh>.
fpar(type*,obj).Puntero al objeto cuyos campos deben ser liberados.

func(FPtr_event_handler,ptr).Manejador de evento. Son funciones <c>callback</c> que serán llamadas por el generador de un evento cuando este ocurra. <lp>event</lp>.
fpar(type*,obj).Datos generales pasados como primer parámetro de la función.
fpar(Event*,event).El evento.

func(FPtr_read,ptr).Crea un objeto a partir de datos leídos desde un <lp>stream</lp>. <lh>Serialización</lh>.
fret(type*).El objeto creado, deserializando los datos del stream.
fpar(Stream*,stream).El canal E/S donde está serializado el objeto.

func(FPtr_read_init,ptr).Similar a <lf>FPtr_read</lf> donde la memoria del objeto ya ha sido reservada, pero no inicializada. <lh>Serialización</lh>.
fpar(Stream*,stream).El canal E/S donde está serializado el objeto.
fpar(type*,obj).El objeto cuyos campos hay que deserializar.

func(FPtr_write,ptr).Escribe un objeto en un <lp>stream</lp>. <lh>Serialización</lh>.
fpar(Stream*,stream).El canal E/S donde serializar el objeto.
fpar(const type*,obj).El objeto a escribir.

func(core_start).Inicia la librería <i>core</i>, reservando espacio para las estructuras internas globales. Internamente llama a <lf>osbs_start</lf>.

func(core_finish).Finaliza la librería <i>core</i>, liberando el espacio de las estructuras internas globales. Internamente llama a <lf>osbs_finish</lf>.
